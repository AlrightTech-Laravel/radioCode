$.fn.masonryGrid=function(options){var settings=$.extend({columns:3,breakpoint:767},options);var $this=$(this),currentColumn=1,i=1,itemCount=1,isDesktop=true;$this.addClass('masonry-grid-origin');$this.children().addClass('masonry-grid-item');function createMasonry(){currentColumn=1;for(columnCount=1;columnCount<=settings.columns;columnCount++){$this.each(function(){$(this).append('<div class="masonry-grid-column masonry-grid-column-'+columnCount+'"></div>');});}
$this.each(function(){$(this).css('display','flex').find('.masonry-grid-column').css('width','100%');});$this.each(function(){var currentGrid=$(this);currentGrid.find('.masonry-grid-item').each(function(){if(currentColumn>settings.columns)currentColumn=1;$(this).attr('id','masonry_grid_item_'+itemCount).appendTo(currentGrid.find('.masonry-grid-column-'+currentColumn));currentColumn++;itemCount++;});});}
function destroyMasonry(){$this.each(function(){while(i<itemCount){$(this).find('#masonry_grid_item_'+i).appendTo($this);i++;}
$(this).find('.masonry-grid-column').remove();$(this).css('display','block').find('.masonry-grid-column').css('width','auto');});}
if($(window).width()>settings.breakpoint){isDesktop=true;createMasonry();}else if($(window).width()<=settings.breakpoint){isDesktop=false;destroyMasonry();}
$(window).on('resize',function(){if($(window).width()>settings.breakpoint&&isDesktop==false){isDesktop=true;createMasonry();}else if($(window).width()<=settings.breakpoint&&isDesktop==true){isDesktop=false;destroyMasonry();}});}